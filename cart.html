<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Shopping Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Berkshire+Swash&family=Cabin+Sketch:wght@400;700&family=Dancing+Script:wght@400..700&family=Emilys+Candy&family=Pacifico&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
      <a class="navbar-brand" href="#">giftos</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#main" aria-controls="main"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon">
          <i class="fa-solid fa-bars"></i></span>
      </button>
      <div class="collapse navbar-collapse" id="main">
        <ul class="navbar-nav me-auto my-2 my-lg-0">
          <li class="nav-item">
            <a class="nav-link active" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">treding</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./index.html">  home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link">store</a>
          </li>
          <li class="nav-item">
            <a class="nav-link">contact</a>
          </li>
          <li class="nav-item dropdown me-5">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i id="selected-icon" class="fa-regular fa-sun" aria-hidden="true"></i>
            </a>
            <ul class="dropdown-menu">
              <li>
                <span id="dark-mode" class="dropdown-item"><i class="fa-regular fa-moon"></i>Dark
                </span>
              </li>
              <li>
                <span id="medium-mode" class="dropdown-item"><i class="fa-solid fa-circle-half-stroke"></i>Auto</span>
              </li>
              <li>
                <span id="light-mode" class="dropdown-item"><i class="fa-regular fa-sun"></i>Light</span>
              </li>
            </ul>
          </li>
        </ul>
        <form class="d-flex">
          <input class="px-2 search" type="search" placeholder="Search" aria-label="Search" />
          <button class="btn0" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>
  <div class="container">
    <div class="row">

      <div class="col-6 m-auto text-center">
        <h1>Shopping Cart</h1>
      </div>
    </div>
    <div id="cartItems"></div>
    <div class="row">

      <div class="col-6 m-auto text-center">
        <p id="totalAmount">Total Amount: $0</p>
      </div>
    </div>
    <div class="row">

      <div class="col-6 m-auto text-center mb-5">
        <button id="buyNow" onclick="order(this)" class="col-4 m-auto">Buy Now</button>
      </div>
    </div>
   
  </div>

  
  

  
  
  <section class="news py-5 bg-black text-white">
    <div class="container py-5">
      <div class="row">
        <div class="col-lg-9 m-auto text-center">
          <h1>Join To Our Society</h1>
          <input type="email" class="px-3" placeholder="Enter Email" />
          <button onclick=" directToCarts(this)" class="btn2">submit</button>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-11 m-auto">
          <div class="row mt-5 mb-3">
            <div class="col-lg-3">
              <h5>customer care</h5>
              <p>reqular</p>
              <p>on time</p>
              <p>always care</p>
            </div>
            <div class="col-lg-3">
              <h5>customer care</h5>
              <p>reqular</p>
              <p>on time</p>
              <p>always care</p>
            </div>
            <div class="col-lg-3">
              <h5>customer care</h5>
              <p>reqular</p>
              <p>on time</p>
              <p>always care</p>
            </div>
            <div class="col-lg-3">
              <h5>SOCIAL MEDIA</h5>
              <span><i class="fa-brands fa-facebook"></i></span>
              <span><i class="fa-brands fa-twitter"></i></span>
              <span><i class="fa-brands fa-whatsapp"></i></span>
              <span><i class="fa-brands fa-square-instagram"></i></span>
            </div>
          </div>
        </div>
        <hr />
        <p class="text-center">
          Copyright Â© 2024 organic. All rights reserved.
        </p>
      </div>
      <span id="top"><i class="fa-solid fa-up-long"></i></span>
    </div>
  </section>

  <script>
    //#region scroll
    const btn = document.getElementById("top");
    window.onscroll = function () {
      if (window.scrollY >= 200) {
        btn.style.display = "block";
      } else {
        btn.style.display = "none";
      }
    };
    btn.onclick = function () {
      window.scrollTo({
        top: 0,
        behavior: "smooth",
      });
    };
    //#endregion scroll
    //#region mode

    const selectedIcon = document.getElementById("selected-icon");
    window.addEventListener("load", function () {
      document.body.style.backgroundColor = "#ffffff";
      document.body.style.color = "#000000";
      selectedIcon.className = "fa-regular fa-sun";
    });

    document
      .getElementById("dark-mode")
      .addEventListener("click", function () {
        selectedIcon.className = "fa-regular fa-moon";
        document.body.style.backgroundColor = "#121212";
        document.body.style.color = 'blue';
      });
    document
      .getElementById("medium-mode")
      .addEventListener("click", function () {
        selectedIcon.className = "fa-solid fa-circle-half-stroke";
        document.body.style.backgroundColor = " #f4f4f4";
        document.body.style.color = "#000000";
      });

    document
      .getElementById("light-mode")
      .addEventListener("click", function () {
        selectedIcon.className = "fa-regular fa-sun";
        document.body.style.backgroundColor = "#ffffff";
        document.body.style.color = "#000000";
      });
    //#endregion mode

    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    const cartItemsDiv = document.getElementById("cartItems");
    const totalAmount = document.getElementById("totalAmount");

    function updateCartDisplay() {
      cartItemsDiv.innerHTML = "";
      let total = 0;

      cart.forEach((product, index) => {
        // Ensure price is a number
        const productPrice = parseFloat(product.productPrice);

        const productDiv = document.createElement("div");
        productDiv.classList.add("cart-item");

        productDiv.innerHTML = `
      <div>
        <img src=${product.imgSrc} alt="" style='width:200px ; height:200px;' class="cart-img">
        <p><strong>${product.productName}</strong></p>
        <p>Price: ${productPrice.toFixed(2)}</p>
      </div>
      <div class="quantity-control">
        <button class="control-btn" onclick="updateQuantity(${index}, -1)">-</button>
        <span>${product.quantity}</span>
        <button class="control-btn" onclick="updateQuantity(${index}, 1)">+</button>
      </div>
      <p>Total: $${(productPrice * product.quantity).toFixed(2)}</p>
      <button class="remove" onclick="removeFromCart('${product.productName}')">Remove</button>
    `;

        cartItemsDiv.appendChild(productDiv);

        // Accumulate total
        total += productPrice * product.quantity;
      });

      // Update total amount in DOM
      totalAmount.textContent = `Total Amount: $${total.toFixed(2)}`;
    }

    function updateQuantity(index, change) {
      cart[index].quantity += change;

      // Ensure quantity doesn't go below 1
      if (cart[index].quantity < 1) {
        cart[index].quantity = 1;
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartDisplay();
    }

    function removeFromCart(productName) {
      cart = cart.filter(product => product.productName !== productName);
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartDisplay();
    }

    document.getElementById("buyNow").addEventListener("click", function () {
      if (cart.length > 0) {
        alert("Thank you for your purchase!");
        
 
    window.location.href = 'order.html';
    return;



        localStorage.removeItem("cart");
        cart = [];
        updateCartDisplay();
      } else {
        alert("Your cart is empty!");
      }
    });


    updateCartDisplay();


  </script>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
</body>

</html>